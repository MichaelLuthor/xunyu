set inquiry-title 测试标题

func login username password
  set vcode 123456
  log 登录用户 $username : $password
  return $vcode
endfunc

call login T20433 123456
log return = $return-val


loop 10 => index
  if $index = 2
    log index = $index
  else
    log index is not 2
  endif
endloop

set browser-name hhhhhh
if browser-name = chrome
  log browser-name is chrome
  set version 80
  if version = 100
    log you are creazy
  endif
  if version > 11
    log you are so old
  endif
  log I don't know what kind of browser is
elseif browser-name = firefox
  log browser-naem is firefox
elseif browser-name = ie
  log browser-name is ie
else 
  set version 80
  if version = 100
    log you are creazy
  endif
  if version > 11
    log you are so old
  endif
  log I don't know what kind of browser is
endif


use browser firefox
open http://127.0.0.1:8001/demo.php
upload #id script/Runtime.php
click #btn-click-test
dblclick #btn-dblclick-test
input #txt-input-test 输入测试
upload #file-upload-test D:/Bash/bash.md
hover #blk-hover-test
select #slt-select-name-test 选项1
close






use browser ie
open http://127.0.0.1:8001/demo.php
click #btn-click-test
dblclick #btn-dblclick-test
input #txt-input-test 输入测试
upload #file-upload-test D:/Bash/bash.md
hover #blk-hover-test
select #slt-select-name-test 选项1
close




use browser ie
use browser firefox
use browser chrome 
use browser chrome 80
use browser chrome 80 as 采购方
use browser firefox as 加工厂
active browser:1
close
close 加工厂
close 采购方
close browser:2
close browser:3
close browser:4













% 加工平台询单发布测试
% @jira-link https://issues.ouyeel.com/WLYDI-9324
% @jira-on-test-passed update-issue-status-passed
% @jira-on-test-failed update-issue-status-failed
% @notify develops,managers

# 根据用户名和密码登录到加工平台
# @returns string
func login username password 
  define 登录连接 /html/body/div[3]/div[1]/div/div/div/div[2]/a[1]
  define 登录按钮 /html/body/div/div/div[2]/div/div/form/div[8]/button

  # 测试 value scope
  set vcode 1234567890
  
  open http://10.60.148.66/
  click 登录连接
  input #userName $username
  input #password $password
  input #vcode $vcode
  click 登录按钮
  wait-url http://10.60.148.66/
  return ok
endfunc


use browser ie
call login T20433 123456

hover /html/body/div[1]/div/div[2]/div[5]/a
wait-elem-present /html/body/div[1]/div/div[2]/div[5]/div
click >询价管理
close-tab-by-url http://10.60.148.66/
wait-url http://10.60.148.66/main?t=buy&fv=OrderManage&sv=all&m=inquiry&s=lists
click >发布询价单
click >剪切加工询价单
wait-elem-present #myLargeModalLabel_1
select #varietys 委托协议下单
if $value eq 1
  input /html/body/div/div/div[5]/form/div[4]/div[7]/div[3]/div[2]/div[1]/input 18068708790
  click #submitSave
endif
loop 5 => index
  input /html/body/div/div/div[5]/form/div[4]/div[7]/div[3]/div[2]/div[1]/input[$index] 18068708790
endloop
wait-elem-text /html/body/div/div/div/div[2]/div/div[2]/div[1]/p[1]/b 您的加工单已成功发送!
assert-elem-text /html/body/div/div/div/div[2]/div/div[2]/div[1]/p[1]/b 您的加工单已成功发送!
close browser